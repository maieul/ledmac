\documentclass{article}
\usepackage{eledmac}

\begin{document}
\makeatletter

\apptocmd{\no@expands}{\let\sameword\sameword@inedtext}{}{}


\def\sameword@inedtext#1{%
  \ifx\sw@@list\empty%
    \def\the@@sw{999}
  \else%
    \gl@p\sw@@list\to\the@@sw%
  \fi%
  \ifnumgreater{\csuse{sw@#1@\the\absline@num}}{1}
    {\showwordrank{#1}{\the@@sw}}%
    {#1}%
}




\newcommand{\sameword}[1]{%
	\csnumgdef{sw@#1}{\csuse{sw@#1}+1}%
	\protected@write\linenum@out{}{\string\@sw{#1}{\csuse{sw@#1}}}%
	\ifx\sw@list\empty%
	  \xdef\sw@num{0}%
	\else%
	  \gl@p\sw@list\to\@tempb%
      \xright@appenditem{\@tempb}\to\sw@@list%
      \global\let\@tempb=\undefined%
	  %
	\fi%
  #1%
}
\newcommand{\@sw}[2]{%
  \csxdef{sw@#1@\the\absline@num}{#2}
  \numdef{\prev@line}{\the\absline@num-1}
  \ifcsundef{sw@#1@\prev@line}{
     \csnumgdef{sw@#1@\prev@line}{\csuse{sw@#1@\the\absline@num}-1}
    }{}
    \numdef{\the@@@sw}{#2-\csuse{sw@#1@\prev@line}}%%%%%%%
  \xright@appenditem{\the@@@sw}\to\sw@list
}
\def\@sw@inref#1#2{}

\list@create{\sw@@list}
\list@create{\sw@list}

\renewcommand*{\@ref@reg}[2]{%
  \global\insert@count=#1\relax
  \loop\ifnum\insert@count>\z@
    \xright@appenditem{\the\absline@num}\to\insertlines@list
    \global\advance\insert@count \m@ne
  \repeat
  \begingroup
    \let\@ref=\dummy@ref
    \let\@lopL\@gobble
    \let\page@action=\relax
    \let\sub@action=\relax
    \let\set@line@action=\relax
    \let\@lab=\relax
    \let\@sw\@sw@inref
    #2
    \global\endpage@num=\page@num
    \global\endline@num=\line@num
    \global\endsubline@num=\subline@num
  \endgroup
    \xright@appenditem%
      {\the\page@num|\the\line@num|%
       \ifsublines@ \the\subline@num \else 0\fi|%
       \the\endpage@num|\the\endline@num|%
       \ifsublines@ \the\endsubline@num \else 0\fi}\to\line@list
  #2}





\newcommand{\showwordrank}[2]{#1\ifnumgreater{#2}{0}{\textsuperscript{#2}}{}}

\begin{ledgroup}

\beginnumbering

\pstart
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{b}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{b}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\edtext{\sameword{a}}{\Afootnote{premier de la ligne}}
\edtext{\sameword{a}}{\Afootnote{deuxième de la ligne}}
\pend

\endnumbering
\end{ledgroup}


\makeatother

\end{document}
